<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>XuperTB IPTV</title>
    <style>
        /* TV-optimized base styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            width: 1920px;
            height: 1080px;
            overflow: hidden;
            background: #0A1828;
            -webkit-user-select: none;
            user-select: none;
            cursor: none;
        }
        /* Hide scrollbars for TV */
        ::-webkit-scrollbar { display: none; }
    </style>
    <!-- WebOS system library -->
    <script src="webOSjs-0.1.0/webOS.js" charset="utf-8"></script>
    <script>
        // WebOS platform detection â€” sets flag before Flutter loads
        window.__WEBOS__ = true;
        window.__TV_MODE__ = true;

        // Handle WebOS back button
        document.addEventListener('keydown', function(e) {
            if (e.keyCode === 461) { // WebOS back button
                e.preventDefault();
                // Send to Flutter via postMessage
                window.postMessage({ type: 'webos_back' }, '*');
            }
        });

        // Prevent context menu on TV
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
    </script>
</head>
<body>
    <!-- Flutter web app loads here -->
    <script src="flutter.js" defer></script>
    <script>
        window.addEventListener('load', function() {
            _flutter.loader.loadEntrypoint({
                serviceWorker: { serviceWorkerVersion: null },
                onEntrypointLoaded: function(engineInitializer) {
                    engineInitializer.initializeEngine().then(function(appRunner) {
                        appRunner.runApp();
                    });
                }
            });
        });
    </script>
</body>
</html>
